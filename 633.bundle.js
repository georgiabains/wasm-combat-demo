"use strict";(self.webpackChunkwasm_combat_demo=self.webpackChunkwasm_combat_demo||[]).push([[633],{633:(t,e,r)=>{r.r(e);var n=r(194),a=r(174);(0,a.oT)(n);const o={creature:{healthCurrent:'[data-creature="health-current"]',healthTotal:'[data-creature="health-total"]',healthProgress:'[data-creature="health-progress"]'},game:{log:'[data-game="log"]'},player:{attackButton:'[data-player="attack-button"]',healthCurrent:'[data-player="health-current"]',healthTotal:'[data-player="health-total"]',healthProgress:'[data-player="health-progress"]'}},_=a.JH.new(30,30,5,"creature"),c=a.JH.new(30,30,5,"player");function u(t){var e,r;d(t,t.get_current_hp()),e=t.get_name(),r=t.get_total_hp(),o[e]&&(document.querySelector(o[e].healthTotal).textContent=r)}function l(t){const e=document.createElement("li");e.textContent=t,document.querySelector(o.game.log).appendChild(e)}function i(t,e){e.set_current_hp(t.get_attack()),d(e,e.get_current_hp()),l(`${t.get_name().toUpperCase()} dealt ${t.get_attack()} damage to ${e.get_name().toUpperCase()}`)}function d(t,e){o[t.get_name()]&&(document.querySelector(o[t.get_name()].healthCurrent).textContent=e,document.querySelector(o[t.get_name()].healthProgress).value=t.get_current_hp()/t.get_total_hp()*100)}u(_),u(c),document.querySelector(o.player.attackButton).addEventListener("click",(()=>{i(c,_),document.querySelector(o.player.attackButton).setAttribute("disabled",!0),_.get_current_hp()?setTimeout((()=>{i(_,c),document.querySelector(o.player.attackButton).removeAttribute("disabled")}),2e3):l("Player wins!")}))},174:(t,e,r)=>{let n;function a(t){n=t}r.d(e,{JH:()=>p,Or:()=>y,mx:()=>f,oT:()=>a});let o=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();let _=null;function c(){return null!==_&&0!==_.byteLength||(_=new Uint8Array(n.memory.buffer)),_}function u(t,e){return t>>>=0,o.decode(c().subarray(t,t+e))}let l=0,i=new("undefined"==typeof TextEncoder?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const d="function"==typeof i.encodeInto?function(t,e){return i.encodeInto(t,e)}:function(t,e){const r=i.encode(t);return e.set(r),{read:t.length,written:r.length}};let s=null;function h(){return(null===s||!0===s.buffer.detached||void 0===s.buffer.detached&&s.buffer!==n.memory.buffer)&&(s=new DataView(n.memory.buffer)),s}const g="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>n.__wbg_entity_free(t>>>0,1)));class p{static __wrap(t){t>>>=0;const e=Object.create(p.prototype);return e.__wbg_ptr=t,g.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,g.unregister(this),t}free(){const t=this.__destroy_into_raw();n.__wbg_entity_free(t,0)}static new(t,e,r,a){const o=function(t,e,r){if(void 0===r){const r=i.encode(t),n=e(r.length,1)>>>0;return c().subarray(n,n+r.length).set(r),l=r.length,n}let n=t.length,a=e(n,1)>>>0;const o=c();let _=0;for(;_<n;_++){const e=t.charCodeAt(_);if(e>127)break;o[a+_]=e}if(_!==n){0!==_&&(t=t.slice(_)),a=r(a,n,n=_+3*t.length,1)>>>0;const e=c().subarray(a+_,a+n);_+=d(t,e).written,a=r(a,n,_,1)>>>0}return l=_,a}(a,n.__wbindgen_malloc,n.__wbindgen_realloc),_=l,u=n.entity_new(t,e,r,o,_);return p.__wrap(u)}get_current_hp(){return n.entity_get_current_hp(this.__wbg_ptr)>>>0}get_total_hp(){return n.entity_get_total_hp(this.__wbg_ptr)>>>0}get_attack(){return n.entity_get_attack(this.__wbg_ptr)>>>0}get_name(){let t,e;try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.entity_get_name(o,this.__wbg_ptr);var r=h().getInt32(o+0,!0),a=h().getInt32(o+4,!0);return t=r,e=a,u(r,a)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,e,1)}}set_current_hp(t){n.entity_set_current_hp(this.__wbg_ptr,t)}}function f(t,e){alert(u(t,e))}function y(t,e){throw new Error(u(t,e))}},194:(t,e,r)=>{var n=r.w[t.id];for(var a in r.r(e),n)a&&(e[a]=n[a]);r(174),n[""]()}}]);
//# sourceMappingURL=633.bundle.js.map